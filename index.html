<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Level 1 Completed ‚Äî Matt's One Year Sober</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0c0f12;
    --ink:#0a0a0c;
    --card:#11151a;
    --text:#e9f1ff;
    --muted:#a8b3c7;
    --neon:#00e5ff;
    --neon2:#ff2bd6;
    --glow:#6df0ff;
    --gold:#ffd166;
    --green:#3ad07a;
    --red:#ff6b6b;
    --orange:#ff9f1a;
    --legendary:#9945ff;
    --neon-orange: #FF4500;
    --neon-fuchsia: #FF1493;
    --dark-cyan: #008B8B;
    --neon-purple: #9370DB;
    --neon-lime: #32CD32;
    --grey-black: #2C2C2C;
    --black: #000000;
  }
  
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--text);font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;overflow-x:hidden}
  html { scroll-snap-type: y mandatory; scroll-behavior: smooth; }
  .wrap{max-width:1050px;margin:0 auto;padding:24px;position:relative}
  h1,h2,h3{font-family:"Space Grotesk",system-ui,sans-serif;margin:0 0 12px}
  h1{font-size:clamp(38px,6vw,72px);line-height:1.05;letter-spacing:.5px}
  h2{font-size:clamp(24px,3.6vw,40px)}
  p{color:var(--muted);line-height:1.6;margin:0}

  /* ====== RADIAL BURST BACKGROUND ====== */
  .burst-container{
    position:fixed;
    inset:0;
    z-index:-2;
    overflow:hidden;
  }
  
  .burst{
    position:absolute;
    width:200%;
    height:200%;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%) scale(0);
    background:
      radial-gradient(circle at 50% 50%, rgba(255,43,214,.15) 0%, transparent 30%),
      radial-gradient(circle at 50% 50%, rgba(0,229,255,.12) 10%, transparent 40%),
      radial-gradient(circle at 50% 50%, rgba(255,195,0,.08) 20%, transparent 50%);
    animation: radialExpand 3s ease-out forwards;
    filter: blur(1px);
  }
  
  @keyframes radialExpand {
    to {
      transform: translate(-50%, -50%) scale(1.5);
    }
  }

  /* ====== STRING/WEB LINES ====== */
  .string-container{
    position:fixed;
    inset:0;
    z-index:-1;
    pointer-events:none;
    overflow:hidden;
  }
  
  .string-line{
    position:absolute;
    height:1px;
    background:linear-gradient(90deg, transparent, var(--neon2), transparent);
    opacity:0;
    transform-origin:left center;
    animation: stringPull 2s ease-out forwards;
  }
  
  .string-line:nth-child(1){
    top:20%;left:-100%;right:-100%;
    animation-delay:0.2s;
    transform:rotate(-15deg);
  }
  
  .string-line:nth-child(2){
    top:40%;left:-100%;right:-100%;
    animation-delay:0.4s;
    transform:rotate(10deg);
  }
  
  .string-line:nth-child(3){
    top:60%;left:-100%;right:-100%;
    animation-delay:0.6s;
    transform:rotate(-8deg);
  }
  
  .string-line:nth-child(4){
    top:80%;left:-100%;right:-100%;
    animation-delay:0.8s;
    transform:rotate(5deg);
  }
  
  @keyframes stringPull {
    0% {
      opacity:0;
      transform:scaleX(0) rotate(var(--rotate, 0deg));
    }
    50% {
      opacity:0.6;
    }
    100% {
      opacity:0.3;
      transform:scaleX(1) rotate(0deg);
    }
  }

  /* ====== CHECKERBOARD WITH DISTORTION ====== */
  .checker{
    --size:40px;
    position:relative;
    background:
      repeating-conic-gradient(#1a1a1a 0% 25%, #0a0a0a 0% 50%) 50% / calc(var(--size)*2) calc(var(--size)*2);
    border-radius:18px;
    border:1px solid #1c222b;
    padding:30px;
    margin:30px 0;
    transform-style:preserve-3d;
    perspective:1000px;
    transition:transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    will-change:transform;
  }
  
  .checker.in-view{
    animation: checkerWarp 2s ease-out;
  }
  
  @keyframes checkerWarp {
    0% {
      transform:perspective(1000px) rotateX(45deg) scale(0.8);
      opacity:0;
    }
    50% {
      transform:perspective(1000px) rotateX(15deg) scale(0.95);
    }
    100% {
      transform:perspective(1000px) rotateX(0) scale(1);
      opacity:1;
    }
  }

  /* ====== DRIP TRANSITION EFFECT ====== */
  .drip-section{
    position:relative;
    overflow:hidden;
    border-radius:18px;
    background:linear-gradient(180deg,#0e1319,#07090d);
    margin:30px 0;
    padding:30px;
  }
  
  .drip-mask{
    position:absolute;
    top:-100%;
    left:0;
    right:0;
    height:200%;
    background:linear-gradient(180deg, 
      transparent 0%, 
      var(--neon2) 45%, 
      var(--neon2) 55%, 
      transparent 100%);
    animation: dripDown 1.5s cubic-bezier(0.7, 0, 0.3, 1) forwards;
    mix-blend-mode:screen;
    pointer-events:none;
  }
  
  @keyframes dripDown {
    to {
      top:100%;
    }
  }

  /* ====== CARDS WITH PARALLAX ====== */
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0) 40%);
    border:1px solid #1b212a;
    border-radius:16px;
    padding:20px 18px;
    box-shadow:0 8px 24px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.02);
    backdrop-filter: blur(4px);
    position:relative;
    overflow:hidden;
    transform:translateY(50px);
    opacity:0;
    transition:all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .card.visible{
    transform:translateY(0);
    opacity:1;
  }
  
  .card::before{
    content:"";
    position:absolute;
    top:-50%;
    left:-50%;
    width:200%;
    height:200%;
    background:radial-gradient(circle, rgba(255,255,255,0.05) 0%, transparent 70%);
    opacity:0;
    transition:opacity 0.3s;
    pointer-events:none;
  }
  
  .card:hover::before{
    opacity:1;
  }

  /* ====== SVG PATH ANIMATIONS ====== */
  .svg-container{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:-1;
  }
  
  .path-draw{
    stroke:var(--neon);
    stroke-width:2;
    fill:none;
    stroke-dasharray:1000;
    stroke-dashoffset:1000;
    opacity:0.3;
    filter:drop-shadow(0 0 10px var(--neon));
  }
  
  .path-draw.animate{
    animation: drawPath 2s ease-out forwards;
  }
  
  @keyframes drawPath {
    to {
      stroke-dashoffset:0;
    }
  }

  /* ====== LIQUID MORPH SECTIONS ====== */
  .liquid-section{
    position:relative;
    padding:40px 20px;
    margin:40px 0;
    background:linear-gradient(135deg, #0e1319 0%, #1a1f2e 100%);
    border-radius:20px;
    overflow:hidden;
  }
  
  .liquid-section::before{
    content:"";
    position:absolute;
    top:-50%;
    left:-50%;
    width:200%;
    height:200%;
    background:radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
      rgba(0,229,255,0.15) 0%, 
      transparent 40%);
    transition:all 0.3s ease;
    pointer-events:none;
  }

  /* ====== RADIAL REVEAL ELEMENTS ====== */
  .radial-reveal{
    position:relative;
    opacity:0;
    transform:scale(0.8);
    transition:all 1s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .radial-reveal.revealed{
    opacity:1;
    transform:scale(1);
  }
  
  .radial-reveal::after{
    content:"";
    position:absolute;
    inset:-20px;
    background:radial-gradient(circle at center, transparent 0%, var(--bg) 70%);
    z-index:-1;
    opacity:0;
    animation: radialPulse 2s ease-out;
  }
  
  @keyframes radialPulse {
    0% {
      transform:scale(0);
      opacity:1;
    }
    100% {
      transform:scale(1.5);
      opacity:0;
    }
  }

  /* ====== GRID AND LAYOUT ====== */
  .grid{display:grid;gap:18px}
  @media(min-width:860px){ 
    .grid.cols-2{grid-template-columns:1fr 1fr} 
    .grid.cols-3{grid-template-columns:repeat(3,1fr)} 
  }

  /* ====== SPECIAL ELEMENTS ====== */
  .tag{
    display:inline-block;
    font-size:12px;
    padding:4px 10px;
    border-radius:999px;
    border:1px solid #27303b;
    color:#b7c4da;
    background:#0b1016;
  }
  
  .big{
    font-size:clamp(32px,5vw,56px);
    font-weight:700;
    letter-spacing:.5px;
  }
  
  .mono{
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  }

  /* ====== PROGRESS RING WITH ANIMATION ====== */
  .ring{
    width:min(260px,60vw);
    aspect-ratio:1;
    border-radius:50%;
    display:grid;
    place-items:center;
    position:relative;
    margin:auto;
    background:
      radial-gradient(closest-side,#0e1319 79%, transparent 80% 100%),
      conic-gradient(from 0deg, var(--green) calc(var(--progress, 0) * 1%), rgba(255,255,255,.08) 0);
    box-shadow:0 0 40px rgba(61, 255, 177, .15), inset 0 0 20px rgba(0,0,0,.6);
    transform:rotate(-90deg);
    transition:--progress 2s ease-out;
  }
  
  .ring > div{
    transform:rotate(90deg);
  }
  
  @property --progress {
    syntax: '<number>';
    initial-value: 0;
    inherits: false;
  }

  /* ====== BARS ====== */
  .bar{
    height:10px;
    border-radius:999px;
    background:#0b1117;
    border:1px solid #1c2430;
    overflow:hidden;
    position:relative;
  }
  
  .bar>span{
    display:block;
    height:100%;
    background:linear-gradient(90deg,var(--neon),var(--glow));
    box-shadow:0 0 16px var(--glow);
    transform:scaleX(0);
    transform-origin:left;
    transition:transform 1.5s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .bar.animate>span{
    transform:scaleX(var(--width, 1));
  }

  /* ====== HEATMAP ====== */
  .heatmap{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(15px,1fr));
    gap:2px;
    margin-top:20px;
  }
  
  .heat-cell{
    aspect-ratio:1;
    border-radius:2px;
    background:#0b1117;
    opacity:0;
    transform:scale(0);
    animation: cellPop 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-delay:calc(var(--index) * 0.002s);
  }
  
  @keyframes cellPop {
    to {
      opacity:1;
      transform:scale(1);
    }
  }
  
  .heat-cell.low{background:#1c3a3a}
  .heat-cell.med{background:#2d5a5a}
  .heat-cell.high{background:#3ad07a}
  .heat-cell.peak{
    background:#00e5ff;
    box-shadow:0 0 8px #00e5ff;
    animation: cellPop 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards, glow 2s ease-in-out infinite;
  }
  
  @keyframes glow {
    0%, 100% {
      box-shadow:0 0 8px #00e5ff;
    }
    50% {
      box-shadow:0 0 20px #00e5ff, 0 0 40px rgba(0,229,255,0.5);
    }
  }

  /* ====== TIMER SECTION ====== */
  .timer-section {
    text-align: center;
    padding: 40px 20px;
    margin: 40px 0;
    background: linear-gradient(135deg, #0e1319 0%, #1a1f2e 100%);
    border-radius: 20px;
    border: 1px solid #1b212a;
  }
  
  .timer-display {
    font-family: "Orbitron", monospace;
    font-size: clamp(24px, 4vw, 48px);
    color: var(--neon);
    text-shadow: 0 0 20px var(--glow);
    margin: 20px 0;
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
  }
  
  .timer-unit {
    background: rgba(0, 229, 255, 0.1);
    border: 1px solid var(--neon);
    border-radius: 8px;
    padding: 10px;
    min-width: 60px;
  }
  
  .timer-label {
    font-size: 12px;
    color: var(--muted);
    margin-top: 5px;
    text-transform: uppercase;
  }
  
  /* ====== STATS SECTION ====== */
  .stats-section {
    padding: 40px 20px;
    margin: 40px 0;
    background: linear-gradient(135deg, #1a1520 0%, #2a1f3e 100%);
    border-radius: 20px;
    border: 1px solid #27303b;
  }
  
  .stats-grid {
    display: grid;
    gap: 20px;
    grid-template-columns: 1fr;
  }
  
  @media (min-width: 600px) {
    .stats-grid {
      grid-template-columns: 1fr 1fr;
    }
  }

  /* ====== UTILITIES ====== */
  .center{text-align:center}
  .muted{color:var(--muted)}
  
  .pulse{
    animation:pulse 2s infinite;
  }
  
  @keyframes pulse{
    0%,100%{transform:scale(1);opacity:1}
    50%{transform:scale(1.05);opacity:.9}
  }

  @keyframes fall {
    to {
      transform: translateY(100vh) rotate(360deg);
      opacity: 0;
    }
  }
</style>
</head>
<body>

<!-- Animated Background Elements -->
<div class="burst-container">
  <div class="burst"></div>
</div>

<div class="string-container">
  <div class="string-line"></div>
  <div class="string-line"></div>
  <div class="string-line"></div>
  <div class="string-line"></div>
</div>

<!-- SVG Paths -->
<svg class="svg-container" viewBox="0 0 1200 800" preserveAspectRatio="none">
  <path class="path-draw" d="M0,400 Q300,200 600,400 T1200,400" />
  <path class="path-draw" d="M0,200 Q300,400 600,200 T1200,200" style="animation-delay:0.5s" />
</svg>

<div class="wrap">
  <!-- ===== HERO WITH RADIAL REVEAL ===== -->
  <section class="radial-reveal" id="hero">
    <span class="tag mono">Nov 8, 2024 ‚Üí Nov 8, 2025</span>
    <h1 style="margin-top:10px">Level 1 Completed</h1>
    <p class="muted" style="margin-bottom:8px">One year clean from meth. 365+ days of choosing life.</p>

    <div class="grid cols-2" style="margin-top:20px">
      <div class="card">
        <h3>Player</h3>
        <div class="big">Matt</div>
        <p class="muted">Class: <strong>Artist / Musician / Asshole</strong></p>
        <p class="muted">Questline: <span class="mono">Reclaim Reality</span></p>
      </div>
      </div>

      <div class="card center">
        <div class="ring" style="--progress:0">
          <div style="z-index:1;position:relative">
            <div class="big">3,650 XP</div>
            <div class="muted">365 / 365 days</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== SOBRIETY TIMER ===== -->
  <section class="timer-section radial-reveal">
    <h2>Time Sober</h2>
    <div class="timer-display" id="sobriety-timer">
      <div class="timer-unit">
        <div>0</div>
        <div class="timer-label">Years</div>
      </div>
      <div class="timer-unit">
        <div>0</div>
        <div class="timer-label">Months</div>
      </div>
      <div class="timer-unit">
        <div>0</div>
        <div class="timer-label">Days</div>
      </div>
      <div class="timer-unit">
        <div>0</div>
        <div class="timer-label">Hours</div>
      </div>
      <div class="timer-unit">
        <div>0</div>
        <div class="timer-label">Minutes</div>
      </div>
      <div class="timer-unit">
        <div>0</div>
        <div class="timer-label">Seconds</div>
      </div>
    </div>
  </section>

  <!-- ===== MILESTONE STATS ===== -->
  <section class="stats-section radial-reveal">
    <h2>Milestone Stats</h2>
    <div class="stats-grid">
      <div class="card center">
        <div class="tag mono pulse" style="background:linear-gradient(90deg,#ff2bd6,#00e5ff);color:#fff;border:none;font-size:14px;padding:8px 16px;margin-bottom:15px">
          üèÜ LEGENDARY ACHIEVEMENT: Only 12% make it this far
        </div>
        <p class="muted">Surviving 1 year clean is rare. Most relapse within the first year.</p>
      </div>
      
      <div class="card">
        <h3>Relapse Resistance</h3>
        <div class="big">88%</div>
        <p class="muted">Beat the odds - 88% relapse rate for meth addiction</p>
        <div class="bar" style="margin-top:8px">
          <span style="--width:0.88;background:linear-gradient(90deg,#ff6b6b,#ff2bd6)"></span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== DRIP TRANSITION SECTION ===== -->
  <section class="drip-section">
    <div class="drip-mask"></div>
    <h2 style="text-align:center;position:relative;z-index:1">Survival Statistics</h2>
    <div class="grid cols-3" style="position:relative;z-index:1">
      <div class="card">
        <h3>Rarity Level</h3>
        <div class="big">1 in 8</div>
        <p class="muted">achieve 1 year clean</p>
      </div>
      
      <div class="card">
        <h3>Withdrawal Boss</h3>
        <div class="big">90 days</div>
        <p class="muted">survived acute + early PAWS phase</p>
        <div class="bar" style="margin-top:8px">
          <span style="--width:1;background:linear-gradient(90deg,#ff2bd6,#ff6b6b)"></span>
        </div>
      </div>
      
      <div class="card">
        <h3>Life Reclaimed</h3>
        <div class="big">+7 years</div>
        <p class="muted">potential added back</p>
        <div class="bar" style="margin-top:8px">
          <span style="--width:1;background:linear-gradient(90deg,#00e5ff,#6df0ff)"></span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== CHECKERBOARD DISTORTION ===== -->
  <section class="checker">
    <h2 style="color:#fff">Sobriety Journey</h2>
    <p style="color:rgba(255,255,255,0.7)">Every day a victory. Intensity = growth momentum.</p>
    <div class="heatmap" id="heatmap"></div>
  </section>

  <!-- ===== RPG LOOT INVENTORY ===== -->
  <section class="liquid-section" style="background:linear-gradient(135deg, #1a1520 0%, #2a1f3e 100%); position: relative;">
    <h2 style="text-align:center;color:#ffd166;text-shadow:0 0 20px rgba(255,209,102,0.5)">üí∞ Loot Inventory</h2>
    <p class="center muted" style="margin-bottom:20px">Resources saved from the void</p>
    
    <!-- Orange/Fuchsia overlay for pop -->
    <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(255,69,0,0.03), rgba(255,20,147,0.03)); pointer-events: none; z-index: -1;"></div>
    
    <div class="grid cols-3">
      <div class="card" style="border:2px solid #ffd166;background:linear-gradient(180deg, rgba(255,209,102,0.05), transparent)">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <span style="font-size:24px">ü™ô</span>
          <h3 style="margin:0;color:#ffd166">Gold Per Month</h3>
        </div>
        <div class="big" style="color:#ffd166">800-1,200</div>
        <p class="muted" style="font-size:11px">Currency recovered monthly</p>
        <div class="bar" style="background:rgba(255,209,102,0.1);border-color:#ffd166">
          <span style="--width:0.75;background:linear-gradient(90deg,#ffd166,#ffed4e)"></span>
        </div>
      </div>
      
      <div class="card" style="border:2px solid #9945ff;background:linear-gradient(180deg, rgba(153,69,255,0.05), transparent)">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <span style="font-size:24px">üíé</span>
          <h3 style="margin:0;color:#9945ff">Epic Treasure</h3>
        </div>
        <div class="big" style="color:#9945ff">14,400</div>
        <p class="muted" style="font-size:11px">Total gold accumulated (ongoing)</p>
        <span class="tag" style="background:#9945ff;color:#fff;border:none">LEGENDARY ITEM</span>
      </div>
      
      <div class="card" style="border:2px solid #00e5ff;background:linear-gradient(180deg, rgba(0,229,255,0.05), transparent)">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <span style="font-size:24px">‚öîÔ∏è</span>
          <h3 style="margin:0;color:#00e5ff">Equipment Unlocked</h3>
        </div>
        <ul style="list-style:none;padding:0;margin:10px 0;font-size:13px">
          <li style="color:#00e5ff;margin:4px 0">‚úì Studio Monitors</li>
          <li style="color:#00e5ff;margin:4px 0">‚úì DJ Controller</li>
          <li style="color:#00e5ff;margin:4px 0">‚úì Art Supplies</li>
          <li style="color:#00e5ff;margin:4px 0">‚úì Gaming Rig Upgrade</li>
        </ul>
      </div>
    </div>
    
    <div class="grid cols-2" style="margin-top:20px">
      <div class="card" style="border:1px solid #3ad07a">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <span style="font-size:20px">üß™</span>
          <h3 style="margin:0;color:#3ad07a">Health Potions</h3>
        </div>
        <div style="display:flex;gap:5px;margin:10px 0">
          <span style="font-size:24px">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
        </div>
        <p class="muted" style="font-size:11px">+7 years life expectancy restored</p>
      </div>
      
      <div class="card" style="border:1px solid #ff6b6b">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <span style="font-size:20px">üõ°Ô∏è</span>
          <h3 style="margin:0;color:#ff6b6b">Defense Stats</h3>
        </div>
        <p class="muted" style="font-size:11px;margin:5px 0">Resistance to relapse: 88%</p>
        <div class="bar" style="background:rgba(255,107,107,0.1)">
          <span style="--width:0.88;background:linear-gradient(90deg,#ff6b6b,#ff2bd6)"></span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== RECOVERY METRICS ===== -->
  <section class="liquid-section">
    <h2 style="text-align:center">Recovery Metrics</h2>
    <div class="grid cols-3">
      <div class="card">
        <h3>Mental Clarity</h3>
        <div class="big">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
        <p class="muted">fog ‚Üí laser focus</p>
        <div class="bar">
          <span style="--width:1;background:var(--green)"></span>
        </div>
      </div>
      <div class="card">
        <h3>Physical Energy</h3>
        <div class="big">‚≠ê‚≠ê‚≠ê‚≠ê¬Ω</div>
        <p class="muted">exhaustion ‚Üí vitality</p>
        <div class="bar">
          <span style="--width:0.9;background:var(--gold)"></span>
        </div>
      </div>
      <div class="card">
        <h3>Emotional Balance</h3>
        <div class="big">‚≠ê‚≠ê‚≠ê‚≠ê</div>
        <p class="muted">chaos ‚Üí stability</p>
        <div class="bar">
          <span style="--width:0.8;background:var(--neon)"></span>
        </div>
      </div>
    </div>
  </section>

  <footer>
    Made with all my light & love for you, Matthew.
    <br>
    -L
  </footer>

</div>

<script>
// ===== INTERSECTION OBSERVER FOR ANIMATIONS =====
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

// Radial reveal observer
const radialObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('revealed');
      radialObserver.unobserve(entry.target);
    }
  });
}, observerOptions);

document.querySelectorAll('.radial-reveal').forEach(el => {
  radialObserver.observe(el);
});

// Card visibility observer
const cardObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      // Animate bars inside cards
      entry.target.querySelectorAll('.bar').forEach(bar => {
        bar.classList.add('animate');
      });
      cardObserver.unobserve(entry.target);
    }
  });
}, observerOptions);

document.querySelectorAll('.card').forEach(el => {
  cardObserver.observe(el);
});

// Checkerboard warp observer
const checkerObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('in-view');
      checkerObserver.unobserve(entry.target);
    }
  });
}, observerOptions);

document.querySelectorAll('.checker').forEach(el => {
  checkerObserver.observe(el);
});

// SVG path animation observer
const pathObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      document.querySelectorAll('.path-draw').forEach(path => {
        path.classList.add('animate');
      });
      pathObserver.disconnect();
    }
  });
}, observerOptions);

pathObserver.observe(document.querySelector('#hero'));

// ===== PROGRESS RING ANIMATION =====
const ringObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      setTimeout(() => {
        entry.target.style.setProperty('--progress', '100');
      }, 500);
      ringObserver.unobserve(entry.target);
    }
  });
}, observerOptions);

document.querySelectorAll('.ring').forEach(el => {
  ringObserver.observe(el);
});

// ===== HEATMAP GENERATION (dynamic based on days sober) =====
const heatmap = document.getElementById('heatmap');
const maxCells = Math.min(daysSober, 365); // Cap at 365 for visual reasons
for(let i = 0; i < maxCells; i++) {
  const cell = document.createElement('div');
  cell.className = 'heat-cell';
  cell.style.setProperty('--index', i);
  
  // Vary intensity based on progress, peak more post-180
  if(i < 30) cell.classList.add('low');
  else if(i < 90) cell.classList.add('med');
  else if(i < 180) cell.classList.add('high');
  else if(i >= 180 && Math.random() > 0.2) cell.classList.add('peak'); // More peaks in back half
  else cell.classList.add('high');
  
  heatmap.appendChild(cell);
}

// ===== LIQUID MORPH MOUSE TRACKING =====
document.querySelectorAll('.liquid-section').forEach(section => {
  section.addEventListener('mousemove', (e) => {
    const rect = section.getBoundingClientRect();
    const x = ((e.clientX - rect.left) / rect.width) * 100;
    const y = ((e.clientY - rect.top) / rect.height) * 100;
    section.style.setProperty('--mouse-x', `${x}%`);
    section.style.setProperty('--mouse-y', `${y}%`);
  });
});

// ===== PARALLAX SCROLL EFFECT =====
let ticking = false;
function updateParallax() {
  const scrolled = window.pageYOffset;
  
  // Move strings at different speeds
  document.querySelectorAll('.string-line').forEach((line, index) => {
    const speed = 0.5 + (index * 0.1);
    line.style.transform = `translateX(${scrolled * speed}px) rotate(${(index - 2) * 5}deg)`;
  });
  
  // Rotate burst slowly
  const burst = document.querySelector('.burst');
  if (burst) {
    burst.style.transform = `translate(-50%, -50%) scale(1.5) rotate(${scrolled * 0.1}deg)`;
  }
  
  ticking = false;
}

function requestTick() {
  if (!ticking) {
    requestAnimationFrame(updateParallax);
    ticking = true;
  }
}

window.addEventListener('scroll', requestTick);

// ===== DRIP ANIMATION TRIGGER =====
const dripObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const mask = entry.target.querySelector('.drip-mask');
      if (mask) {
        mask.style.animation = 'dripDown 1.5s cubic-bezier(0.7, 0, 0.3, 1) forwards';
      }
      dripObserver.unobserve(entry.target);
    }
  });
}, observerOptions);

document.querySelectorAll('.drip-section').forEach(el => {
  dripObserver.observe(el);
});

// ===== INITIAL LOAD SEQUENCE =====
window.addEventListener('load', () => {
  // Trigger initial animations
  setTimeout(() => {
    document.body.style.opacity = '1';
  }, 100);
  
  // Calculate and update sobriety stats
  const startDate = new Date('2024-11-08');
  const today = new Date();
  const daysSober = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
  
  // Update date range tag
  const tag = document.querySelector('.tag.mono');
  if (tag) {
    const endDate = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    tag.textContent = `Nov 8, 2024 ‚Üí ${endDate}`;
  }
  
  // Update XP and days in ring
  const xpElement = document.querySelector('.ring .big');
  const daysElement = document.querySelector('.ring .muted');
  if (xpElement && daysElement) {
    const xp = daysSober * 10;
    xpElement.textContent = `${xp.toLocaleString()} XP`;
    daysElement.textContent = `${daysSober} days sober`;
  }
  
  // Start live timer
  startSobrietyTimer();
  
  // Confetti animation (added grey-black for contrast)
  confetti();
});

// ===== SOBRIETY TIMER FUNCTION =====
function startSobrietyTimer() {
  const startDate = new Date('2024-11-08');
  const timerElement = document.getElementById('sobriety-timer');
  const units = timerElement.querySelectorAll('.timer-unit div:first-child');
  
  function updateTimer() {
    const now = new Date();
    const diff = now - startDate;
    
    const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365.25));
    const months = Math.floor((diff % (1000 * 60 * 60 * 24 * 365.25)) / (1000 * 60 * 60 * 24 * 30.44));
    const days = Math.floor((diff % (1000 * 60 * 60 * 24 * 30.44)) / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    
    const values = [years, months, days, hours, minutes, seconds];
    units.forEach((unit, index) => {
      unit.textContent = values[index];
    });
  }
  
  updateTimer(); // Initial update
  setInterval(updateTimer, 1000); // Update every second
}

// Confetti function (enhanced with grey-black)
function confetti() {
  const colors = ['#FF4500', '#FF1493', '#008B8B', '#9370DB', '#32CD32', '#2C2C2C'];
  for (let i = 0; i < 100; i++) {
    const conf = document.createElement('div');
    conf.style.position = 'fixed';
    conf.style.left = Math.random() * 100 + 'vw';
    conf.style.top = '-10px';
    conf.style.width = '10px';
    conf.style.height = '10px';
    conf.style.background = colors[Math.floor(Math.random() * colors.length)];
    conf.style.pointerEvents = 'none';
    conf.style.zIndex = '1000';
    conf.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
    document.body.appendChild(conf);
    
    setTimeout(() => conf.remove(), 5000);
  }
}
</script>

</body>
</html>